"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useScript = void 0;
const react_1 = require("react");
const useScript = ({ startLoading, onReady, onError, src, delay = 0 }) => {
    const isLoading = react_1.useRef(false);
    const [state, setState] = react_1.useState({
        ready: false,
        error: null,
    });
    react_1.useEffect(() => {
        if (startLoading && !isLoading.current) {
            setTimeout(() => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = () => {
                    setState({ ready: true, error: null });
                    onReady === null || onReady === void 0 ? void 0 : onReady();
                };
                script.onerror = (error) => {
                    setState({ ready: false, error });
                    onError === null || onError === void 0 ? void 0 : onError(error);
                };
                document.body.appendChild(script);
                isLoading.current = true;
            }, delay);
        }
    }, [startLoading, delay, src, onReady, onError]);
    return state;
};
exports.useScript = useScript;
//# sourceMappingURL=useScript.js.map